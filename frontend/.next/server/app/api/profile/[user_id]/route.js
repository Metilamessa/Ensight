(()=>{var e={};e.id=967,e.ids=[967],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},30712:(e,t,r)=>{"use strict";r.r(t),r.d(t,{patchFetch:()=>f,routeModule:()=>l,serverHooks:()=>m,workAsyncStorage:()=>c,workUnitAsyncStorage:()=>g});var s={};r.r(s),r.d(s,{GET:()=>u,PATCH:()=>d});var a=r(96559),n=r(48088),o=r(37719),i=r(32190),p=r(86890);async function u(e,t){let{user_id:r}=await t.params;try{let t=await fetch(`${p.C}/profiles/${r}`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:e.headers.get("authorization")||""}});if(!t.ok){let e=await t.json();return i.NextResponse.json({message:e.message||"User not found"},{status:t.status})}let s=await t.json();return i.NextResponse.json(s,{status:200})}catch(e){return i.NextResponse.json({message:"Internal server error",error:e instanceof Error?e.message:String(e)},{status:500})}}async function d(e,t){let{user_id:r}=await t.params;try{let t=await e.formData(),s=e.headers.get("authorization");if(!s)return i.NextResponse.json({message:"Authorization token is required"},{status:401});let a=new FormData,n=t.get("first_name"),o=t.get("last_name"),u=t.get("email"),d=t.get("enable_personalization"),l=t.get("track_reading_progress"),c=t.get("content_update_notifications"),g=t.get("topics"),m=t.get("profile_image");n&&a.append("first_name",n),o&&a.append("last_name",o),u&&a.append("email",u),null!==d&&a.append("enable_personalization",d),null!==l&&a.append("track_reading_progress",l),null!==c&&a.append("content_update_notifications",c),g&&("string"==typeof g?a.append("topics",g):a.append("topics",JSON.stringify(g))),m&&m instanceof File&&a.append("profile_image",m);let f=await fetch(`${p.C}/profiles/${r}`,{method:"PATCH",headers:{Authorization:s},body:a});if(!f.ok){let e=await f.json();return i.NextResponse.json({message:e.detail||e.message||"Failed to update profile"},{status:f.status})}let h=await f.json();return i.NextResponse.json(h,{status:200})}catch(e){return i.NextResponse.json({message:"Internal server error",error:e instanceof Error?e.message:String(e)},{status:500})}}let l=new a.AppRouteRouteModule({definition:{kind:n.RouteKind.APP_ROUTE,page:"/api/profile/[user_id]/route",pathname:"/api/profile/[user_id]",filename:"route",bundlePath:"app/api/profile/[user_id]/route"},resolvedPagePath:"/home/met/2025 Projects/ENSIGHT/frontend/src/app/api/profile/[user_id]/route.ts",nextConfigOutput:"",userland:s}),{workAsyncStorage:c,workUnitAsyncStorage:g,serverHooks:m}=l;function f(){return(0,o.patchFetch)({workAsyncStorage:c,workUnitAsyncStorage:g})}},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},78335:()=>{},86890:(e,t,r)=>{"use strict";r.d(t,{C:()=>s});let s="https://ensight-backend.onrender.com"},96487:()=>{}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[447,580],()=>r(30712));module.exports=s})();