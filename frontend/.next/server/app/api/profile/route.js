(()=>{var e={};e.id=73,e.ids=[73],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},78335:()=>{},86890:(e,t,r)=>{"use strict";r.d(t,{C:()=>s});let s="https://ensight-backend.onrender.com"},91176:(e,t,r)=>{"use strict";r.r(t),r.d(t,{patchFetch:()=>f,routeModule:()=>d,serverHooks:()=>g,workAsyncStorage:()=>c,workUnitAsyncStorage:()=>m});var s={};r.r(s),r.d(s,{GET:()=>l,POST:()=>u});var a=r(96559),o=r(48088),n=r(37719),i=r(32190),p=r(86890);async function u(e){try{let t,r=e.headers.get("authorization");if(!r)return i.NextResponse.json({message:"Authorization token is required"},{status:401});let s=await e.formData(),a=s.get("first_name"),o=s.get("last_name"),n=s.get("email"),u=s.get("password"),l=s.get("role"),d=s.get("profile_image");if(!a||!o||!n||!u||!l)return i.NextResponse.json({message:"Missing required fields: first_name, last_name, email, password, role"},{status:400});let c=new FormData;c.append("first_name",a),c.append("last_name",o),c.append("email",n),c.append("password",u),c.append("role",l),d&&d instanceof File&&c.append("profile_image",d),console.log("Creating user:",{firstName:a,lastName:o,email:n,role:l});try{t=await fetch(`${p.C}/profiles/`,{method:"POST",headers:{Authorization:r},body:c}),console.log("Response status:",t.status,t.statusText)}catch(e){return console.error("Fetch error:",e),i.NextResponse.json({message:"Failed to connect to backend server",error:e instanceof Error?e.message:String(e)},{status:503})}if(!t.ok){let e;try{e=await t.json()}catch{e={message:`Server returned ${t.status}`}}if(422===t.status&&e.detail){let r=Array.isArray(e.detail)?e.detail.map(e=>`${e.loc?.join(".")}: ${e.msg}`).join(", "):e.detail;return i.NextResponse.json({message:r||e.message||"Validation error"},{status:t.status})}return i.NextResponse.json({message:e.detail||e.message||"Failed to create profile"},{status:t.status})}let m=await t.json();return i.NextResponse.json(m,{status:201})}catch(e){return console.error("Unexpected error:",e),i.NextResponse.json({message:"Internal server error",error:e instanceof Error?e.message:String(e)},{status:500})}}async function l(e){try{let t=await fetch(`${p.C}/profiles`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:e.headers.get("authorization")||""}});if(!t.ok){let e=await t.json();return i.NextResponse.json({message:e.message||"Failed to fetch profiles"},{status:t.status})}let r=await t.json();return i.NextResponse.json(r,{status:200})}catch(e){return i.NextResponse.json({message:"Internal server error",error:e instanceof Error?e.message:String(e)},{status:500})}}let d=new a.AppRouteRouteModule({definition:{kind:o.RouteKind.APP_ROUTE,page:"/api/profile/route",pathname:"/api/profile",filename:"route",bundlePath:"app/api/profile/route"},resolvedPagePath:"/home/met/2025 Projects/ENSIGHT/frontend/src/app/api/profile/route.ts",nextConfigOutput:"",userland:s}),{workAsyncStorage:c,workUnitAsyncStorage:m,serverHooks:g}=d;function f(){return(0,n.patchFetch)({workAsyncStorage:c,workUnitAsyncStorage:m})}},96487:()=>{}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[447,580],()=>r(91176));module.exports=s})();