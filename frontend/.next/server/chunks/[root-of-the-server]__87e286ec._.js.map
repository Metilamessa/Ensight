{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 6, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 60, "column": 0}, "map": {"version":3,"sources":["file:///home/met/2025%20Projects/Ensight_frontend_2/frontend/src/lib/constants.ts"],"sourcesContent":["export const BASE_URL = \"https://ensight-backend.onrender.com\";\n"],"names":[],"mappings":";;;AAAO,MAAM,WAAW","debugId":null}},
    {"offset": {"line": 70, "column": 0}, "map": {"version":3,"sources":["file:///home/met/2025%20Projects/Ensight_frontend_2/frontend/src/app/api/profile/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from \"next/server\";\nimport { BASE_URL } from \"@/lib/constants\";\n\nexport async function POST(req: NextRequest) {\n  try {\n    const token = req.headers.get(\"authorization\");\n\n    if (!token) {\n      return NextResponse.json(\n        { message: \"Authorization token is required\" },\n        { status: 401 }\n      );\n    }\n\n    // Get FormData from request\n    const incomingFormData = await req.formData();\n\n    // Validate required fields\n    const firstName = incomingFormData.get(\"first_name\");\n    const lastName = incomingFormData.get(\"last_name\");\n    const email = incomingFormData.get(\"email\");\n    const password = incomingFormData.get(\"password\");\n    const role = incomingFormData.get(\"role\");\n    const profileImage = incomingFormData.get(\"profile_image\");\n\n    if (!firstName || !lastName || !email || !password || !role) {\n      return NextResponse.json(\n        { message: \"Missing required fields: first_name, last_name, email, password, role\" },\n        { status: 400 }\n      );\n    }\n\n    // Use native FormData (same pattern as article route which works)\n    const formDataToSend = new FormData();\n    formDataToSend.append(\"first_name\", firstName as string);\n    formDataToSend.append(\"last_name\", lastName as string);\n    formDataToSend.append(\"email\", email as string);\n    formDataToSend.append(\"password\", password as string);\n    formDataToSend.append(\"role\", role as string);\n    \n    // Handle file upload if present\n    if (profileImage && profileImage instanceof File) {\n      formDataToSend.append(\"profile_image\", profileImage);\n    }\n\n    // Log what we're sending for debugging (remove in production)\n    console.log(\"Creating user:\", { firstName, lastName, email, role });\n\n    let response;\n    try {\n      response = await fetch(`${BASE_URL}/profiles/`, {\n        method: \"POST\",\n        headers: {\n          Authorization: token,\n          // Don't set Content-Type - fetch will set it with boundary automatically\n        },\n        body: formDataToSend,\n      });\n      \n      console.log(\"Response status:\", response.status, response.statusText);\n    } catch (fetchError) {\n      console.error(\"Fetch error:\", fetchError);\n      return NextResponse.json(\n        {\n          message: \"Failed to connect to backend server\",\n          error: fetchError instanceof Error ? fetchError.message : String(fetchError),\n        },\n        { status: 503 }\n      );\n    }\n\n    if (!response.ok) {\n      let errorData;\n      try {\n        errorData = await response.json();\n      } catch {\n        errorData = { message: `Server returned ${response.status}` };\n      }\n      \n      // Handle validation errors from FastAPI\n      if (response.status === 422 && errorData.detail) {\n        const details = Array.isArray(errorData.detail) \n          ? errorData.detail.map((d: any) => `${d.loc?.join('.')}: ${d.msg}`).join(', ')\n          : errorData.detail;\n        return NextResponse.json(\n          { \n            message: details || errorData.message || \"Validation error\" \n          },\n          { status: response.status }\n        );\n      }\n      \n      return NextResponse.json(\n        { \n          message: errorData.detail || errorData.message || \"Failed to create profile\" \n        },\n        { status: response.status }\n      );\n    }\n\n    const createdProfile = await response.json();\n    return NextResponse.json(createdProfile, { status: 201 });\n  } catch (error) {\n    console.error(\"Unexpected error:\", error);\n    return NextResponse.json(\n      {\n        message: \"Internal server error\",\n        error: error instanceof Error ? error.message : String(error),\n      },\n      { status: 500 }\n    );\n  }\n}\nexport async function GET(req: NextRequest) {\n  try {\n    const response = await fetch(`${BASE_URL}/profiles`, {\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: req.headers.get(\"authorization\") || \"\",\n      },\n    });\n\n    if (!response.ok) {\n      const errorData = await response.json();\n      return NextResponse.json(\n        { message: errorData.message || \"Failed to fetch profiles\" },\n        { status: response.status }\n      );\n    }\n\n    const profiles = await response.json();\n    return NextResponse.json(profiles, { status: 200 });\n  } catch (error) {\n    return NextResponse.json(\n      {\n        message: \"Internal server error\",\n        error: error instanceof Error ? error.message : String(error),\n      },\n      { status: 500 }\n    );\n  }\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}