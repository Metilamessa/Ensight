{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 6, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 60, "column": 0}, "map": {"version":3,"sources":["file:///home/liban/Projects/Meti/Ensight_frontend/frontend/src/lib/constants.ts"],"sourcesContent":["export const BASE_URL = \"https://ensight-backend.onrender.com\";\n"],"names":[],"mappings":";;;AAAO,MAAM,WAAW","debugId":null}},
    {"offset": {"line": 70, "column": 0}, "map": {"version":3,"sources":["file:///home/liban/Projects/Meti/Ensight_frontend/frontend/src/app/api/profile/%5Buser_id%5D/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from \"next/server\";\nimport { BASE_URL } from \"@/lib/constants\";\n\nexport async function GET(\n  req: NextRequest,\n context: { params: Promise<{ user_id: string }> }\n) {\n  const params = await context.params;\n  const { user_id } = params;\n\n  try {\n    const response = await fetch(`${BASE_URL}/profiles/${user_id}`, {\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: req.headers.get(\"authorization\") || \"\",\n      },\n    });\n\n    if (!response.ok) {\n      const errorData = await response.json();\n      return NextResponse.json(\n        { message: errorData.message || \"User not found\" },\n        { status: response.status }\n      );\n    }\n\n    const userData = await response.json();\n    return NextResponse.json(userData, { status: 200 });\n  } catch (error) {\n    return NextResponse.json(\n      {\n        message: \"Internal server error\",\n        error: error instanceof Error ? error.message : String(error),\n      },\n      { status: 500 }\n    );\n  }\n}\n\nexport async function PATCH(\n  req: NextRequest,\n context: { params: Promise<{ user_id: string }> }\n) {\n  const params = await context.params;\n  const { user_id } = params;\n\n  try {\n    const formData = await req.formData();\n    const token = req.headers.get(\"authorization\");\n\n    if (!token) {\n      return NextResponse.json(\n        { message: \"Authorization token is required\" },\n        { status: 401 }\n      );\n    }\n\n    // Build FormData for backend - handle all fields\n    const formDataToSend = new FormData();\n    \n    // Add form fields if they exist\n    const first_name = formData.get(\"first_name\");\n    const last_name = formData.get(\"last_name\");\n    const email = formData.get(\"email\");\n    const enable_personalization = formData.get(\"enable_personalization\");\n    const track_reading_progress = formData.get(\"track_reading_progress\");\n    const content_update_notifications = formData.get(\"content_update_notifications\");\n    const topics = formData.get(\"topics\");\n    const profile_image = formData.get(\"profile_image\");\n\n    if (first_name) formDataToSend.append(\"first_name\", first_name as string);\n    if (last_name) formDataToSend.append(\"last_name\", last_name as string);\n    if (email) formDataToSend.append(\"email\", email as string);\n    if (enable_personalization !== null) {\n      formDataToSend.append(\"enable_personalization\", enable_personalization as string);\n    }\n    if (track_reading_progress !== null) {\n      formDataToSend.append(\"track_reading_progress\", track_reading_progress as string);\n    }\n    if (content_update_notifications !== null) {\n      formDataToSend.append(\"content_update_notifications\", content_update_notifications as string);\n    }\n    if (topics) {\n      // If topics is a string, use it; if it's already JSON, stringify it\n      if (typeof topics === \"string\") {\n        formDataToSend.append(\"topics\", topics);\n      } else {\n        formDataToSend.append(\"topics\", JSON.stringify(topics));\n      }\n    }\n    if (profile_image && profile_image instanceof File) {\n      formDataToSend.append(\"profile_image\", profile_image);\n    }\n\n    const response = await fetch(`${BASE_URL}/profiles/${user_id}`, {\n      method: \"PATCH\",\n      headers: {\n        Authorization: token,\n      },\n      body: formDataToSend,\n    });\n\n    if (!response.ok) {\n      const errorData = await response.json();\n      return NextResponse.json(\n        { message: errorData.detail || errorData.message || \"Failed to update profile\" },\n        { status: response.status }\n      );\n    }\n\n    const updatedUserData = await response.json();\n    return NextResponse.json(updatedUserData, { status: 200 });\n  } catch (error) {\n    return NextResponse.json(\n      {\n        message: \"Internal server error\",\n        error: error instanceof Error ? error.message : String(error),\n      },\n      { status: 500 }\n    );\n  }\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}