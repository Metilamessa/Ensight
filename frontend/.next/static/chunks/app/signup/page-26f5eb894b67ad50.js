(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[879],{6654:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"useMergedRef",{enumerable:!0,get:function(){return a}});let l=s(12115);function a(e,t){let s=(0,l.useRef)(null),a=(0,l.useRef)(null);return(0,l.useCallback)(l=>{if(null===l){let e=s.current;e&&(s.current=null,e());let t=a.current;t&&(a.current=null,t())}else e&&(s.current=r(e,l)),t&&(a.current=r(t,l))},[e,t])}function r(e,t){if("function"!=typeof e)return e.current=t,()=>{e.current=null};{let s=e(t);return"function"==typeof s?s:()=>e(null)}}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},19349:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>u});var l=s(95155),a=s(88578),r=s(35695),n=s(12115),i=s(42245);function u(){let e=(0,i.n)(e=>e.setLoggedIn),[t,s]=(0,n.useState)(null),u=(0,r.useRouter)();(0,n.useEffect)(()=>{{let e=localStorage.getItem("user"),t=localStorage.getItem("token");e&&t&&u.push("/")}},[u]);let o=async t=>{try{let s=await fetch("/api/auth/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!s.ok){let e=await s.json();throw Error(e.message||"Signup failed")}let l=await s.json();localStorage.setItem("user",JSON.stringify(l.user)),localStorage.setItem("token",l.token),e(!0),u.push("/")}catch(e){s(e.message)}};return(0,l.jsxs)("div",{className:"py-20 mx-auto",children:[t&&(0,l.jsx)("p",{className:"mt-2 mb-4 text-sm text-center text-red-500",children:t}),(0,l.jsx)(a.A,{isLogin:!1,onSubmit:o})]})}},35695:(e,t,s)=>{"use strict";var l=s(18999);s.o(l,"useRouter")&&s.d(t,{useRouter:function(){return l.useRouter}})},42245:(e,t,s)=>{"use strict";s.d(t,{n:()=>l});let l=(0,s(65453).v)(e=>({isLoggedIn:!1,setLoggedIn:t=>e({isLoggedIn:t})}))},65453:(e,t,s)=>{"use strict";s.d(t,{v:()=>u});var l=s(12115);let a=e=>{let t,s=new Set,l=(e,l)=>{let a="function"==typeof e?e(t):e;if(!Object.is(a,t)){let e=t;t=(null!=l?l:"object"!=typeof a||null===a)?a:Object.assign({},t,a),s.forEach(s=>s(t,e))}},a=()=>t,r={setState:l,getState:a,getInitialState:()=>n,subscribe:e=>(s.add(e),()=>s.delete(e))},n=t=e(l,a,r);return r},r=e=>e?a(e):a,n=e=>e,i=e=>{let t=r(e),s=e=>(function(e,t=n){let s=l.useSyncExternalStore(e.subscribe,()=>t(e.getState()),()=>t(e.getInitialState()));return l.useDebugValue(s),s})(t,e);return Object.assign(s,t),s},u=e=>e?i(e):i},88578:(e,t,s)=>{"use strict";s.d(t,{A:()=>u});var l=s(95155),a=s(12115),r=s(6874),n=s.n(r),i=s(83347);function u(e){let{isLogin:t,onSubmit:s}=e,[r,u]=(0,a.useState)({email:"",password:""}),[o,c]=(0,a.useState)({email:"",password:""}),[d,m]=(0,a.useState)(!1),f=()=>{let e=!0,t={email:"",password:""};return/^\S+@\S+$/.test(r.email)||(t.email="Invalid email",e=!1),r.password.length<6&&(t.password="Password must be at least 6 characters",e=!1),c(t),e},p=e=>{u({...r,[e.target.name]:e.target.value})},b=async e=>{if(e.preventDefault(),f()){m(!0);try{await s({email:r.email,password:r.password})}finally{m(!1)}}};return(0,l.jsx)("div",{className:"flex items-center justify-center p-4 bg-surface",children:(0,l.jsxs)("div",{className:"w-full max-w-md p-6 border rounded-md shadow-lg",children:[(0,l.jsx)("h2",{className:"mb-6 text-2xl font-semibold text-center text-blueblack-white",children:t?"Login":"Sign Up"}),(0,l.jsxs)("form",{onSubmit:b,className:"flex flex-col gap-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{htmlFor:"email",className:"block mb-1 font-medium text-blueblack-white",children:"Email"}),(0,l.jsx)("input",{id:"email",name:"email",type:"email",placeholder:"your@email.com",required:!0,value:r.email,onChange:p,className:"w-full px-3 py-2 border rounded-md border-blueblack-white text-gray-800"}),o.email&&(0,l.jsx)("p",{className:"mt-1 text-sm text-primary-accent",children:o.email})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{htmlFor:"password",className:"block mb-1 font-medium text-blueblack-white",children:"Password"}),(0,l.jsx)("input",{id:"password",name:"password",type:"password",placeholder:"Your password",required:!0,value:r.password,onChange:p,className:"w-full px-3 py-2 border rounded-md border-blueblack-white text-gray-800"}),o.password&&(0,l.jsx)("p",{className:"mt-1 text-sm text-primary-accent",children:o.password})]}),(0,l.jsxs)("div",{className:"flex items-center justify-between mt-4",children:[(0,l.jsxs)("p",{className:"text-sm",children:[t?"Need an account?":"Already have an account? ",(0,l.jsx)(n(),{href:t?"/signup":"/login",className:"text-blue-light hover:underline",children:t?" Sign Up":" Login"})]}),(0,l.jsx)("button",{type:"submit",className:"flex items-center justify-center px-4 py-2 rounded-md cursor-pointer text-surface bg-blueblack-white hover:bg-surface hover:text-blueblack-white",disabled:d,children:d?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(i.Loader,{size:"sm",className:"mr-2"}),"Loading..."]}):t?"Login":"Sign Up"})]})]})]})})}},96387:(e,t,s)=>{Promise.resolve().then(s.bind(s,19349))}},e=>{var t=t=>e(e.s=t);e.O(0,[3347,6874,8441,1684,7358],()=>t(96387)),_N_E=e.O()}]);