(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2972],{91470:(e,t,a)=>{Promise.resolve().then(a.bind(a,92627))},92627:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>eb});var s=a(95155),l=a(12115),r=a(46647),i=a(70112),n=a(26903),o=a(8593),c=a(15763),d=a(63617),u=a(755),h=a(41698),p=a(22439),m=a(83347),x=a(30934),j=a(26029),g=a(59741),f=a(81001),y=a(98703),b=a(55991),T=a(73396),w=a(66068),A=a(30699),v=a(16701);let S={DRAFT:"red",REVIEW:"yellow",PUBLISHED:"green"},C=e=>e&&["EDITOR","ADMIN","SUPERADMIN"].includes(e);function E(e){let{articles:t,loading:a,onView:r,onEdit:i,onDelete:n,onApprove:o,itemsPerPage:c=5,userRole:d}=e,[u,h]=(0,l.useState)(1),p=Math.ceil(t.length/c),E=t.slice((u-1)*c,u*c);return a?(0,s.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,s.jsx)(m.Loader,{})}):(0,s.jsxs)("div",{children:[(0,s.jsxs)(x.Table,{highlightOnHover:!0,verticalSpacing:"sm",className:"border border-gray-300",children:[(0,s.jsx)(x.Table.Thead,{className:"text-center text-gray-700 bg-gray-400",children:(0,s.jsxs)(x.Table.Tr,{children:[(0,s.jsx)(x.Table.Th,{children:"Title"}),(0,s.jsx)(x.Table.Th,{children:"Category"}),(0,s.jsx)(x.Table.Th,{children:"Subcategory"}),(0,s.jsx)(x.Table.Th,{children:"Author"}),(0,s.jsx)(x.Table.Th,{children:"Status"}),(0,s.jsx)(x.Table.Th,{children:"Publication Date"}),(0,s.jsx)(x.Table.Th,{children:"Actions"})]})}),(0,s.jsx)(x.Table.Tbody,{children:E.map(e=>(0,s.jsxs)(x.Table.Tr,{className:"text-left",children:[(0,s.jsx)(x.Table.Td,{children:e.title}),(0,s.jsx)(x.Table.Td,{children:e.category||"None"}),(0,s.jsx)(x.Table.Td,{children:e.subcategory||"-"}),(0,s.jsx)(x.Table.Td,{children:e.author}),(0,s.jsx)(x.Table.Td,{children:(0,s.jsx)(j.Badge,{color:S[e.status],size:"sm",children:e.status})}),(0,s.jsx)(x.Table.Td,{children:e.date?new Date(e.date).toLocaleDateString():"-"}),(0,s.jsx)(x.Table.Td,{children:(0,s.jsxs)(g.Menu,{shadow:"md",width:200,position:"bottom-end",children:[(0,s.jsx)(g.Menu.Target,{children:(0,s.jsx)(f.ActionIcon,{color:"blue",title:"Actions",size:"sm",children:(0,s.jsx)(b.A,{size:14})})}),(0,s.jsxs)(g.Menu.Dropdown,{children:[(0,s.jsx)(g.Menu.Item,{leftSection:(0,s.jsx)(T.A,{size:14}),onClick:()=>r(e),children:"View"}),(0,s.jsx)(g.Menu.Item,{leftSection:(0,s.jsx)(w.A,{size:14}),onClick:()=>i(e),children:"Edit"}),C(d)&&o&&("DRAFT"===e.status||"REVIEW"===e.status)&&(0,s.jsx)(g.Menu.Item,{leftSection:(0,s.jsx)(A.A,{size:14}),onClick:()=>o(e.id),color:"green",children:"Approve"}),(0,s.jsx)(g.Menu.Item,{leftSection:(0,s.jsx)(v.A,{size:14}),onClick:()=>n(e.id),color:"red",children:"Delete"})]})]})})]},e.id))})]}),p>1&&(0,s.jsxs)("div",{className:"flex justify-end mt-4",children:[(0,s.jsxs)("span",{className:"mt-2 mr-2 text-xs text-gray-300",children:["Total Articles: (",t.length,")"]}),(0,s.jsx)(y.Pagination,{total:p,value:u,onChange:h,size:"sm",radius:"md",withEdges:!0})]})]})}var I=a(79737),N=a(11659),k=a(44644),z=a(21220),P=a(58887),F=a(33597),D=a(91481),L=a(66121),O=a(10890),M=a(66766);let R=[{label:"Business",value:"business",subcategories:["startup","markets"]},{label:"Finance",value:"finance",subcategories:["banking","investment"]},{label:"Economy",value:"economy",subcategories:["policies","trade"]},{label:"Tech and Science",value:"tech and science",subcategories:["Innovation","Digital"]}];function B(e){let{initialValues:t,onSubmit:a,loading:r,isEditMode:d}=e,[u,h]=(0,l.useState)([]),p=(0,N.m)({initialValues:t,validate:{title:e=>e.length<3?"Title must be at least 3 characters":null,category:e=>e?null:"Category is required",date:e=>e?null:"Publication date is required",readTime:e=>e?null:"Read time is required",content:e=>e.length<10?"Content must be at least 10 characters":null,description:e=>e.length<10?"Description must be at least 10 characters":null,image:e=>d&&!e?"Image is required for new articles":null}});return((0,l.useEffect)(()=>{if(p.values.category){let e=R.find(e=>e.value===p.values.category),t=(null==e?void 0:e.subcategories)||[];h(e=>e.length===t.length&&e.every((e,a)=>e===t[a])?e:t),p.values.subcategory&&!t.includes(p.values.subcategory)&&p.setFieldValue("subcategory","")}else h([]),p.setFieldValue("subcategory","")},[p.values.category]),r)?(0,s.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,s.jsx)(m.Loader,{})}):(0,s.jsxs)("form",{onSubmit:p.onSubmit(a),className:"p-4",children:[(0,s.jsx)(o.TextInput,{label:"Title",placeholder:"Enter article title",...p.getInputProps("title"),mb:"md"}),!d&&(0,s.jsx)(c.Select,{label:"Status",placeholder:"Select status",data:[{label:"Draft",value:"DRAFT"},{label:"Published",value:"PUBLISHED"}],...p.getInputProps("status"),mb:"md"}),(0,s.jsx)(c.Select,{label:"Category",placeholder:"Select category",data:R.map(e=>({label:e.label,value:e.value})),...p.getInputProps("category"),mb:"md"}),(0,s.jsx)(c.Select,{label:"Subcategory (First select category)",placeholder:"Select subcategory",data:u.map(e=>({label:e,value:e})),...p.getInputProps("subcategory"),disabled:!p.values.category,mb:"md"}),(0,s.jsx)(O.K,{label:"Publication Date",placeholder:"Select publication date",value:p.values.date,onChange:e=>{let t=e?new Date(e):null;p.setFieldValue("date",t)},error:p.errors.date,mb:"md"}),(0,s.jsx)(k.NumberInput,{label:"Read Time",placeholder:"Enter read time (e.g., 5 min)",...p.getInputProps("readTime"),mb:"md"}),(0,s.jsxs)(i.Group,{justify:"space-between",align:"flex-start",wrap:"nowrap",mb:"md",children:[d&&p.values.image&&(0,s.jsxs)(z.Stack,{align:"center",gap:"xs",style:{flexShrink:0},children:[(0,s.jsx)(M.default,{src:p.values.image instanceof File?URL.createObjectURL(p.values.image):"string"==typeof p.values.image?p.values.image:"",alt:p.values.title||"Uploaded image",width:100,height:100,style:{objectFit:"cover"}}),(0,s.jsx)(P.Text,{size:"sm",color:"dimmed",children:"Current Image"})]}),(0,s.jsx)(F.FileInput,{label:"Select an Image",placeholder:"Upload image",accept:"image/*",...p.getInputProps("image"),style:{flex:1,maxWidth:"".concat(d?"calc(100% - 120px)":"100%")}})]}),(0,s.jsx)(D.Textarea,{label:"Content",placeholder:"Enter article content",minRows:6,...p.getInputProps("content"),mb:"md"}),(0,s.jsx)(D.Textarea,{label:"Description",placeholder:"Enter article description",minRows:4,...p.getInputProps("description"),mb:"md"}),(0,s.jsx)(L.Switch,{label:"Premium Content",checked:p.values.isPremium,onChange:e=>p.setFieldValue("isPremium",e.currentTarget.checked),mb:"md"}),(0,s.jsx)(o.TextInput,{label:"Image Caption",placeholder:"Image caption (optional)",...p.getInputProps("caption"),mb:"md"}),(0,s.jsx)(o.TextInput,{label:"Quote",placeholder:"Enter quote (optional)",...p.getInputProps("quote"),mb:"md"}),(0,s.jsx)(o.TextInput,{label:"Quote Author",placeholder:"Enter quote author (optional)",...p.getInputProps("quoteAuthor"),mb:"md"}),(0,s.jsx)(o.TextInput,{label:"Tag",placeholder:"Enter tag (optional)",...p.getInputProps("tag"),mb:"md"}),(0,s.jsx)(i.Group,{justify:"flex-end",mt:"lg",children:(0,s.jsx)(n.Button,{type:"submit",disabled:r||!p.isDirty,color:"blue",children:d?"Update Article":"Create Article"})})]})}var q=a(13568);function U(e){let{onClose:t}=e,[a,r]=(0,l.useState)(null),[i,n]=(0,l.useState)(!1);(0,l.useEffect)(()=>{let e=localStorage.getItem("token");e&&(console.log("Token loaded:",e),r(e))},[]);let o={id:(0,I.A)(),slug:"",title:"",status:"DRAFT",category:"",subcategory:"",author:"",date:new Date,readTime:"",image:"",href:null,content:"",description:"",isPremium:!1,caption:"",quote:"",quoteAuthor:"",tag:"",noOfReaders:0},c=async e=>{if(!a)return void q.Ay.error("Authentication token missing");let s=e.image&&e.image instanceof File?e.image:null;if(!s)return void q.Ay.error("Image is required");n(!0);try{let l={title:e.title,status:e.status,category:e.category,author:e.author||"d8a6d106-016d-4faa-9bed-5e223cd6536b",subcategory:e.subcategory||null,date:e.date instanceof Date?e.date.toISOString():null,read_time:e.readTime,content:e.content,description:e.description,is_premium:e.isPremium,caption:e.caption||null,quote:e.quote||null,quote_author:e.quoteAuthor||null,tag:e.tag||null},r=new FormData;r.append("article_data",JSON.stringify(l)),r.append("image",s,s.name||"upload.jpg");let i=await fetch("/api/article",{method:"POST",headers:{Authorization:"Bearer ".concat(a)},body:r});if(!i.ok){let e=await i.json();q.Ay.error(e.message||"Failed to create article");return}q.Ay.success("Article created successfully"),t()}catch(e){q.Ay.error(e.message||"Failed to create article")}finally{n(!1)}};return(0,s.jsx)(B,{initialValues:o,onSubmit:c,loading:i,isEditMode:!1})}function _(e){let{article:t,onClose:a}=e,[r,i]=(0,l.useState)(null),[n,o]=(0,l.useState)(null),[c,d]=(0,l.useState)(!1);(0,l.useEffect)(()=>{let e=localStorage.getItem("token");e&&i(e)},[]),(0,l.useEffect)(()=>{(async()=>{if((null==t?void 0:t.id)&&r){d(!0);try{let e=await fetch("/api/article/id/".concat(t.id),{method:"GET",headers:{Authorization:"Bearer ".concat(r)}});if(!e.ok){q.Ay.error("Failed to fetch article"),d(!1);return}let a=await e.json();o(a)}catch(e){q.Ay.error(e.message||"Failed to fetch article")}finally{d(!1)}}})()},[null==t?void 0:t.id,r]);let u=async e=>{if(!r)return void q.Ay.error("Authentication token missing");d(!0);try{let t={title:e.title,status:e.status,category:e.category,subcategory:e.subcategory||null,date:e.date||null,read_time:e.readTime,content:e.content,description:e.description,is_premium:e.isPremium,caption:e.caption||null,quote:e.quote||null,quote_author:e.quoteAuthor||null,tag:e.tag||null,author:e.author||"d8a6d106-016d-4faa-9bed-5e223cd6536b"},s=new FormData;s.append("article_data",JSON.stringify(t)),e.image&&e.image instanceof File&&s.append("image",e.image);let l=await fetch("/api/article/id/".concat(e.id),{method:"PATCH",headers:{Authorization:"Bearer ".concat(r)},body:s});if(!l.ok){let e=await l.json();q.Ay.error(e.message||"Failed to update article");return}q.Ay.success("Article updated successfully"),a()}catch(e){q.Ay.error(e.message||"Failed to update article")}finally{d(!1)}};return c?(0,s.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,s.jsx)(m.Loader,{})}):n?(0,s.jsx)(B,{initialValues:n,onSubmit:u,loading:c,isEditMode:!0}):(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center py-8 space-y-4",children:[(0,s.jsx)("p",{children:"Article not found"}),(0,s.jsx)("button",{onClick:a,className:"px-4 py-2 text-white bg-red-500 rounded-md cursor-pointer",children:"Close"})]})}var V=a(93751),G=a(49077);let H={DRAFT:"red",PUBLISHED:"green"},W=e=>{let{selectedArticle:t}=e;return t?(0,s.jsxs)("div",{className:"space-y-4",children:[t.image&&"string"==typeof t.image&&(0,s.jsxs)("div",{children:[(0,s.jsx)(V.Title,{order:4,children:"Image"}),(0,s.jsx)(G.Image,{src:t.image,alt:t.title,radius:"md",height:200,fit:"contain",className:"w-full max-w-md"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(V.Title,{order:4,children:"Title"}),(0,s.jsx)(P.Text,{children:t.title})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(V.Title,{order:4,children:"Category"}),(0,s.jsx)(P.Text,{children:t.category||"None"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(V.Title,{order:4,children:"Subcategory"}),(0,s.jsx)(P.Text,{children:t.subcategory||"-"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(V.Title,{order:4,children:"Author"}),(0,s.jsx)(P.Text,{children:t.author})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(V.Title,{order:4,children:"Status"}),(0,s.jsx)(j.Badge,{color:H[t.status],size:"sm",children:t.status})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(V.Title,{order:4,children:"Publication Date"}),(0,s.jsx)(P.Text,{children:t.date?new Date(t.date).toLocaleDateString():"-"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(V.Title,{order:4,children:"Description"}),(0,s.jsx)(P.Text,{children:t.description||"-"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(V.Title,{order:4,children:"Content"}),(0,s.jsx)(P.Text,{children:t.content||"-"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(V.Title,{order:4,children:"Read Time"}),(0,s.jsx)(P.Text,{children:t.readTime||"-"})]})]}):(0,s.jsx)(P.Text,{children:"No article selected."})};function J(e){let{data:t}=e,[a,r]=(0,l.useState)(""),[m,x]=(0,l.useState)("All"),[j,g]=(0,l.useState)(!1),[f,y]=(0,l.useState)(!1),[b,T]=(0,l.useState)(!1),[w,A]=(0,l.useState)(null),[v,S]=(0,l.useState)(t),[C,I]=(0,l.useState)(!0),[N,k]=(0,l.useState)(null),[z,P]=(0,l.useState)(null);(0,l.useEffect)(()=>{let e=localStorage.getItem("token");e&&k(e);let t=localStorage.getItem("user");if(t)try{let e=JSON.parse(t);P(e.role||null)}catch(e){}},[]);let F=async()=>{try{I(!0);let e=await fetch("/api/article",{method:"GET",headers:{"Content-Type":"application/json",Authorization:N?"Bearer ".concat(N):""}});e.ok||(q.Ay.error("Failed to fetch articles: ".concat(e.statusText)),S([]));let t=await e.json();S(t)}catch(e){q.Ay.error(e instanceof Error?e.message:"Failed to load articles. Please try again later."),S([])}finally{I(!1)}};(0,l.useEffect)(()=>{N&&F()},[N]);let D=()=>{F()},L=async e=>{try{let t=await fetch("/api/article/id/".concat(e),{method:"DELETE",headers:{Authorization:N?"Bearer ".concat(N):""}});if(!t.ok){let e=await t.json();q.Ay.error("Failed to delete article: ".concat(e.message));return}q.Ay.success("Article deleted successfully"),await F()}catch(e){q.Ay.error(e instanceof Error?e.message:"Failed to delete article. Please try again later.")}},O=async e=>{try{let t=await fetch("/api/article/id/".concat(e,"/approve"),{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:N?"Bearer ".concat(N):""}});if(!t.ok){let e=await t.json();q.Ay.error("Failed to approve article: ".concat(e.message||e.detail));return}q.Ay.success("Article approved successfully"),await F()}catch(e){q.Ay.error(e instanceof Error?e.message:"Failed to approve article. Please try again later.")}},M=v.filter(e=>{let t=e.title.toLowerCase().includes(a.toLowerCase()),s=e.category||"None",l="All"===m||s.toLowerCase()===m.toLowerCase();return t&&l});return(0,s.jsxs)("div",{className:"max-w-full p-4 overflow-x-auto sm:p-6 md:p-8",children:[(0,s.jsxs)("div",{className:"flex flex-col gap-4 mb-6 sm:flex-row sm:justify-between sm:items-center",children:[(0,s.jsxs)(i.Group,{gap:"xs",wrap:"wrap",children:[(0,s.jsx)(n.Button,{leftSection:(0,s.jsx)(u.A,{size:16}),variant:"filled",color:"blue",onClick:()=>g(!0),size:"compact-md",className:"w-full sm:w-auto",children:"Add new"}),(0,s.jsx)(n.Button,{leftSection:(0,s.jsx)(h.A,{size:16}),variant:"outline",color:"blue",onClick:D,size:"compact-md",className:"w-full sm:w-auto",children:"Refresh"})]}),(0,s.jsxs)(i.Group,{gap:"xs",wrap:"wrap",children:[(0,s.jsx)(o.TextInput,{placeholder:"Search...",value:a,onChange:e=>r(e.currentTarget.value),rightSection:(0,s.jsx)(p.A,{size:16}),size:"sm"}),(0,s.jsx)(c.Select,{placeholder:"All",data:["All","Tech and Science","Finance","Economy","Business"],value:m,onChange:e=>x(e||"All"),size:"sm"})]})]}),(0,s.jsx)(E,{articles:M,loading:C,onView:e=>{A(e),T(!0)},onEdit:e=>{A(e),y(!0)},onDelete:L,onApprove:O,userRole:z||void 0}),(0,s.jsx)(d.Modal,{opened:j,onClose:()=>g(!1),title:"Add New Article",size:"xl",closeOnEscape:!1,closeOnClickOutside:!1,children:(0,s.jsx)(U,{onClose:()=>{g(!1),D()}})}),(0,s.jsx)(d.Modal,{opened:f,onClose:()=>y(!1),title:"Edit Article",size:"xl",closeOnEscape:!1,closeOnClickOutside:!1,children:w&&(0,s.jsx)(_,{article:w,onClose:()=>{y(!1),D()}})}),(0,s.jsx)(d.Modal,{opened:b,onClose:()=>T(!1),title:"View Article",size:"xl",closeOnEscape:!1,closeOnClickOutside:!1,children:w&&(0,s.jsx)(W,{selectedArticle:w})})]})}let Q=[{header:"First Name",accessor:"firstName"},{header:"Last Name",accessor:"lastName"},{header:"Email",accessor:"email"},{header:"Actions",accessor:"actions"}];function K(e){let{users:t,loading:a,onView:r,onEdit:i,onDelete:n,itemsPerPage:o=5}=e,[c,d]=(0,l.useState)(1),u=Math.ceil(t.length/o),h=t.slice((c-1)*o,c*o);return a?(0,s.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,s.jsx)(m.Loader,{})}):(0,s.jsxs)("div",{children:[(0,s.jsxs)(x.Table,{highlightOnHover:!0,verticalSpacing:"sm",className:"border border-gray-300",children:[(0,s.jsx)(x.Table.Thead,{className:"text-center text-gray-700 bg-gray-400",children:(0,s.jsx)(x.Table.Tr,{children:Q.map(e=>(0,s.jsx)(x.Table.Th,{children:e.header},e.accessor))})}),(0,s.jsx)(x.Table.Tbody,{children:h.map(e=>(0,s.jsxs)(x.Table.Tr,{className:"text-left",children:[(0,s.jsx)(x.Table.Td,{children:e.firstName}),(0,s.jsx)(x.Table.Td,{children:e.lastName}),(0,s.jsx)(x.Table.Td,{children:e.email}),(0,s.jsx)(x.Table.Td,{children:(0,s.jsxs)(g.Menu,{shadow:"md",width:200,position:"bottom-end",children:[(0,s.jsx)(g.Menu.Target,{children:(0,s.jsx)(f.ActionIcon,{color:"blue",title:"Actions",size:"sm",children:(0,s.jsx)(b.A,{size:14})})}),(0,s.jsxs)(g.Menu.Dropdown,{children:[(0,s.jsx)(g.Menu.Item,{leftSection:(0,s.jsx)(T.A,{size:14}),onClick:()=>r(e),children:"View"}),(0,s.jsx)(g.Menu.Item,{leftSection:(0,s.jsx)(w.A,{size:14}),onClick:()=>i(e),children:"Edit"}),(0,s.jsx)(g.Menu.Item,{leftSection:(0,s.jsx)(v.A,{size:14}),onClick:()=>n(e.id),color:"red",children:"Delete"})]})]})})]},e.id))})]}),u>1&&(0,s.jsxs)("div",{className:"flex justify-end mt-4",children:[(0,s.jsxs)("span",{className:"mt-2 mr-2 text-xs text-gray-300",children:["Total Users: (",t.length,")"]}),(0,s.jsx)(y.Pagination,{total:u,value:c,onChange:d,size:"sm",radius:"md",withEdges:!0})]})]})}var $=a(25345);let X=[{label:"Admin",value:"ADMIN"},{label:"Editor",value:"EDITOR"},{label:"Writer",value:"WRITER"}];function Y(e){let{initialValues:t,onSubmit:a,loading:l,isEditMode:r}=e,d=(0,N.m)({initialValues:t,validate:{firstName:e=>e.length<2?"First name must be at least 2 characters":null,lastName:e=>e.length<2?"Last name must be at least 2 characters":null,email:e=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)?null:"Invalid email address",password:(e,t)=>r||e&&!(e.length<6)?null:"Password must be at least 6 characters",role:e=>e?null:"Role is required"}});return l?(0,s.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,s.jsx)(m.Loader,{})}):(0,s.jsxs)("form",{onSubmit:d.onSubmit(a),className:"p-4",children:[(0,s.jsx)(o.TextInput,{label:"First Name",placeholder:"Enter first name",...d.getInputProps("firstName"),mb:"md"}),(0,s.jsx)(o.TextInput,{label:"Last Name",placeholder:"Enter last name",...d.getInputProps("lastName"),mb:"md"}),(0,s.jsx)(o.TextInput,{label:"Email",placeholder:"Enter email",...d.getInputProps("email"),mb:"md"}),!r&&(0,s.jsx)($.PasswordInput,{label:"Password",placeholder:"Enter password",...d.getInputProps("password"),mb:"md",required:!0}),(0,s.jsx)(c.Select,{label:"Role",placeholder:"Select role",data:X,...d.getInputProps("role"),mb:"md"}),(0,s.jsx)(i.Group,{justify:"flex-end",mt:"lg",children:(0,s.jsx)(n.Button,{type:"submit",disabled:l||!d.isDirty(),color:"blue",children:r?"Update User":"Create User"})})]})}function Z(e){let{onClose:t}=e,[a,r]=(0,l.useState)(null),[i,n]=(0,l.useState)(!1);(0,l.useEffect)(()=>{let e=localStorage.getItem("token");e&&r(e)},[]);let o={id:(0,I.A)(),firstName:"",lastName:"",email:"",password:"",role:""},c=async e=>{if(!a)return void q.Ay.error("Authentication token missing");n(!0);try{if(!e.password||e.password.length<6){q.Ay.error("Password must be at least 6 characters"),n(!1);return}let s=new FormData;s.append("first_name",e.firstName),s.append("last_name",e.lastName),s.append("email",e.email),s.append("password",e.password),s.append("role",e.role);let l=await fetch("/api/profile",{method:"POST",headers:{Authorization:"Bearer ".concat(a)},body:s});if(!l.ok){let e=await l.json();q.Ay.error(e.detail||e.message||"Failed to create user");return}q.Ay.success("User created successfully"),t()}catch(e){q.Ay.error(e.message||"Failed to create user")}finally{n(!1)}};return(0,s.jsx)(Y,{initialValues:o,onSubmit:c,loading:i,isEditMode:!1})}function ee(e){let{user:t,onClose:a}=e,[r,i]=(0,l.useState)(null),[n,o]=(0,l.useState)(null),[c,d]=(0,l.useState)(!1);(0,l.useEffect)(()=>{let e=localStorage.getItem("token");e&&i(e)},[]),(0,l.useEffect)(()=>{(async()=>{if((null==t?void 0:t.id)&&r){d(!0);try{let e=await fetch("/api/profile/".concat(t.id),{method:"GET",headers:{Authorization:"Bearer ".concat(r)}});if(!e.ok){q.Ay.error("Failed to fetch user"),d(!1);return}let a=await e.json();o(a)}catch(e){q.Ay.error(e.message||"Failed to fetch user")}finally{d(!1)}}})()},[null==t?void 0:t.id,r]);let u=async e=>{if(!r)return void q.Ay.error("Authentication token missing");d(!0);try{let t={firstName:e.firstName,lastName:e.lastName,email:e.email,role:e.role},s=await fetch("/api/profile/".concat(e.id),{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)},body:JSON.stringify(t)});if(!s.ok){let e=await s.json();q.Ay.error(e.message||"Failed to update user");return}q.Ay.success("User updated successfully"),a()}catch(e){q.Ay.error(e.message||"Failed to update user")}finally{d(!1)}};return c?(0,s.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,s.jsx)(m.Loader,{})}):n?(0,s.jsx)(Y,{initialValues:n,onSubmit:u,loading:c,isEditMode:!0}):(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center py-8 space-y-4",children:[(0,s.jsx)("p",{children:"User not found"}),(0,s.jsx)("button",{onClick:a,className:"px-4 py-2 text-white bg-red-500 rounded-md cursor-pointer",children:"Close"})]})}let et=e=>{let{selectedUser:t}=e;return t?(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(V.Title,{order:4,children:"First Name"}),(0,s.jsx)(P.Text,{children:t.firstName||"-"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(V.Title,{order:4,children:"Last Name"}),(0,s.jsx)(P.Text,{children:t.lastName||"-"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(V.Title,{order:4,children:"Email"}),(0,s.jsx)(P.Text,{children:t.email||"-"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(V.Title,{order:4,children:"Role"}),(0,s.jsx)(P.Text,{children:t.role||"-"})]})]}):(0,s.jsx)(P.Text,{children:"No user selected."})};function ea(e){let{data:t}=e,[a,r]=(0,l.useState)(""),[m,x]=(0,l.useState)("All"),[j,g]=(0,l.useState)(!1),[f,y]=(0,l.useState)(!1),[b,T]=(0,l.useState)(!1),[w,A]=(0,l.useState)(null),[v,S]=(0,l.useState)(t),[C,E]=(0,l.useState)(!0),[I,N]=(0,l.useState)(null);(0,l.useEffect)(()=>{let e=localStorage.getItem("token");e&&N(e)},[]);let k=async()=>{try{E(!0);let e=await fetch("/api/profile",{method:"GET",headers:{"Content-Type":"application/json",Authorization:I?"Bearer ".concat(I):""}});e.ok||(q.Ay.error("Failed to fetch users: ".concat(e.statusText)),S([]));let t=await e.json();S(Array.isArray(t)?t:t.users||[])}catch(e){q.Ay.error(e instanceof Error?e.message:"Failed to load users. Please try again later."),S([])}finally{E(!1)}};(0,l.useEffect)(()=>{I&&k()},[I]);let z=()=>{k()},P=async e=>{try{let t=await fetch("/api/profile/".concat(e),{method:"DELETE",headers:{Authorization:I?"Bearer ".concat(I):""}});if(!t.ok){let e=await t.json();q.Ay.error(e.message||"HTTP error! status: ".concat(t.status));return}await k()}catch(e){q.Ay.error(e instanceof Error?e.message:"Failed to delete user. Please try again later.")}},F=v.filter(e=>{let t=e.firstName.toLowerCase().includes(a.toLowerCase())||e.lastName.toLowerCase().includes(a.toLowerCase())||e.email.toLowerCase().includes(a.toLowerCase()),s="All"===m||e.role.toLowerCase()===m.toLowerCase();return t&&s});return(0,s.jsxs)("div",{className:"max-w-full p-4 overflow-x-auto sm:p-6 md:p-8",children:[(0,s.jsxs)("div",{className:"flex flex-col gap-4 mb-6 sm:flex-row sm:justify-between sm:items-center",children:[(0,s.jsxs)(i.Group,{gap:"xs",wrap:"wrap",children:[(0,s.jsx)(n.Button,{leftSection:(0,s.jsx)(u.A,{size:16}),variant:"filled",color:"blue",onClick:()=>g(!0),size:"compact-md",className:"w-full sm:w-auto",children:"Add new"}),(0,s.jsx)(n.Button,{leftSection:(0,s.jsx)(h.A,{size:16}),variant:"outline",color:"blue",onClick:z,size:"compact-md",className:"w-full sm:w-auto",children:"Refresh"})]}),(0,s.jsxs)(i.Group,{gap:"xs",wrap:"wrap",children:[(0,s.jsx)(o.TextInput,{placeholder:"Search...",value:a,onChange:e=>r(e.currentTarget.value),rightSection:(0,s.jsx)(p.A,{size:16}),size:"sm"}),(0,s.jsx)(c.Select,{placeholder:"All",data:["All","Admin","User","Editor"],value:m,onChange:e=>x(e||"All"),size:"sm"})]})]}),(0,s.jsx)(K,{users:F,loading:C,onView:e=>{A(e),T(!0)},onEdit:e=>{A(e),y(!0)},onDelete:P}),(0,s.jsx)(d.Modal,{opened:j,onClose:()=>g(!1),title:"Add New User",size:"xl",closeOnEscape:!1,closeOnClickOutside:!1,children:(0,s.jsx)(Z,{onClose:()=>{g(!1),z()}})}),(0,s.jsx)(d.Modal,{opened:f,onClose:()=>y(!1),title:"Edit User",size:"xl",closeOnEscape:!1,closeOnClickOutside:!1,children:w&&(0,s.jsx)(ee,{user:w,onClose:()=>{y(!1),z()}})}),(0,s.jsx)(d.Modal,{opened:b,onClose:()=>T(!1),title:"View User",size:"xl",closeOnEscape:!1,closeOnClickOutside:!1,children:w&&(0,s.jsx)(et,{selectedUser:w})})]})}let es={"Featured Insight":"blue","Our Latest Reports":"green","Data & Ensights":"orange","Date Hub & Archive":"purple"},el=[{header:"Title",accessor:"title"},{header:"Description",accessor:"description"},{header:"Category",accessor:"category"},{header:"Actions",accessor:"actions"}];function er(e){let{resources:t,loading:a,onView:r,onEdit:i,onDelete:n,itemsPerPage:o=5}=e,[c,d]=(0,l.useState)(1),u=Math.ceil(t.length/o),h=t.slice((c-1)*o,c*o);return a?(0,s.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,s.jsx)(m.Loader,{})}):(0,s.jsxs)("div",{children:[(0,s.jsxs)(x.Table,{highlightOnHover:!0,verticalSpacing:"sm",className:"border border-gray-300",children:[(0,s.jsx)(x.Table.Thead,{className:"text-center text-gray-700 bg-gray-400",children:(0,s.jsx)(x.Table.Tr,{children:el.map(e=>(0,s.jsx)(x.Table.Th,{children:e.header},e.accessor))})}),(0,s.jsx)(x.Table.Tbody,{children:h.map(e=>(0,s.jsxs)(x.Table.Tr,{className:"text-left",children:[(0,s.jsx)(x.Table.Td,{children:e.title}),(0,s.jsx)(x.Table.Td,{children:e.description||"-"}),(0,s.jsx)(x.Table.Td,{children:(0,s.jsx)(j.Badge,{color:es[e.category],size:"sm",children:e.category})}),(0,s.jsx)(x.Table.Td,{children:(0,s.jsxs)(g.Menu,{shadow:"md",width:200,position:"bottom-end",children:[(0,s.jsx)(g.Menu.Target,{children:(0,s.jsx)(f.ActionIcon,{color:"blue",title:"Actions",size:"sm",children:(0,s.jsx)(b.A,{size:14})})}),(0,s.jsxs)(g.Menu.Dropdown,{children:[(0,s.jsx)(g.Menu.Item,{leftSection:(0,s.jsx)(T.A,{size:14}),onClick:()=>r(e),children:"View"}),(0,s.jsx)(g.Menu.Item,{leftSection:(0,s.jsx)(w.A,{size:14}),onClick:()=>i(e),children:"Edit"}),(0,s.jsx)(g.Menu.Item,{leftSection:(0,s.jsx)(v.A,{size:14}),onClick:()=>n(e.id),color:"red",children:"Delete"})]})]})})]},e.id))})]}),u>1&&(0,s.jsxs)("div",{className:"flex justify-end mt-4",children:[(0,s.jsxs)("span",{className:"mt-2 mr-2 text-xs text-gray-300",children:["Total Resources: (",t.length,")"]}),(0,s.jsx)(y.Pagination,{total:u,value:c,onChange:d,size:"sm",radius:"md",withEdges:!0})]})]})}let ei=[{label:"Featured Insight",value:"Featured Insight"},{label:"Our Latest Reports",value:"Our Latest Reports"},{label:"Data & Ensights",value:"Data & Ensights"},{label:"Date Hub & Archive",value:"Date Hub & Archive"}];function en(e){let{initialValues:t,onSubmit:a,loading:l,isEditMode:r}=e,d=(0,N.m)({initialValues:t,validate:{title:e=>e.length<3?"Title must be at least 3 characters":null,description:e=>e.length<10?"Description must be at least 10 characters":null,category:e=>e?null:"Category is required"}});return l?(0,s.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,s.jsx)(m.Loader,{})}):(0,s.jsxs)("form",{onSubmit:d.onSubmit(a),className:"p-4",children:[(0,s.jsx)(o.TextInput,{label:"Title",placeholder:"Enter title",...d.getInputProps("title"),mb:"md"}),(0,s.jsx)(D.Textarea,{label:"Description",placeholder:"Enter description",minRows:4,...d.getInputProps("description"),mb:"md"}),(0,s.jsx)(c.Select,{label:"Category",placeholder:"Select category",data:ei,...d.getInputProps("category"),mb:"md"}),(0,s.jsx)(i.Group,{justify:"flex-end",mt:"lg",children:(0,s.jsx)(n.Button,{type:"submit",disabled:l||!d.isDirty(),color:"blue",children:r?"Update Resource":"Create Resource"})})]})}function eo(e){let{onClose:t}=e,[a,r]=(0,l.useState)(null),[i,n]=(0,l.useState)(!1);(0,l.useEffect)(()=>{let e=localStorage.getItem("token");e&&r(e)},[]);let o={id:(0,I.A)(),title:"",description:"",category:"Featured Insight"},c=async e=>{if(!a)return void q.Ay.error("Authentication token missing");n(!0);try{let s=new FormData;s.append("title",e.title),s.append("description",e.description),s.append("featured_insight_id",""),s.append("report_ids",""),s.append("data_insight_ids",""),s.append("event_ids","");let l=await fetch("/api/resources",{method:"POST",headers:{Authorization:"Bearer ".concat(a)},body:s});if(!l.ok){let e=await l.json();q.Ay.error(e.message||"Failed to create resource");return}q.Ay.success("Resource created successfully"),t()}catch(e){q.Ay.error(e.message||"Failed to create resource")}finally{n(!1)}};return(0,s.jsx)(en,{initialValues:o,onSubmit:c,loading:i,isEditMode:!1})}function ec(e){let{resource:t,onClose:a}=e,[r,i]=(0,l.useState)(null),[n,o]=(0,l.useState)(null),[c,d]=(0,l.useState)(!1);(0,l.useEffect)(()=>{let e=localStorage.getItem("token");e&&i(e)},[]),(0,l.useEffect)(()=>{(async()=>{if((null==t?void 0:t.id)&&r){d(!0);try{let e=await fetch("/api/resources/".concat(t.id),{method:"GET",headers:{Authorization:"Bearer ".concat(r)}});if(!e.ok){q.Ay.error("Failed to fetch resource"),d(!1);return}let a=await e.json();o(a)}catch(e){q.Ay.error(e.message||"Failed to fetch resource")}finally{d(!1)}}})()},[null==t?void 0:t.id,r]);let u=async e=>{if(!r)return void q.Ay.error("Authentication token missing");d(!0);try{let t=new FormData;e.title&&t.append("title",e.title),e.description&&t.append("description",e.description),t.append("featured_insight_id",""),t.append("report_ids",""),t.append("data_insight_ids",""),t.append("event_ids","");let s=await fetch("/api/resources",{method:"PATCH",headers:{Authorization:"Bearer ".concat(r)},body:t});if(!s.ok){let e=await s.json();q.Ay.error(e.message||"Failed to update resource");return}q.Ay.success("Resource updated successfully"),a()}catch(e){q.Ay.error(e.message||"Failed to update resource")}finally{d(!1)}};return c?(0,s.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,s.jsx)(m.Loader,{})}):n?(0,s.jsx)(en,{initialValues:n,onSubmit:u,loading:c,isEditMode:!0}):(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center py-8 space-y-4",children:[(0,s.jsx)("p",{children:"Resource not found"}),(0,s.jsx)("button",{onClick:a,className:"px-4 py-2 text-white bg-red-500 rounded-md cursor-pointer",children:"Close"})]})}let ed={"Featured Insight":"blue","Our Latest Reports":"green","Data & Ensights":"orange","Date Hub & Archive":"purple"},eu=e=>{let{selectedResource:t}=e;return t?(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(V.Title,{order:4,children:"Title"}),(0,s.jsx)(P.Text,{children:t.title||"-"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(V.Title,{order:4,children:"Description"}),(0,s.jsx)(P.Text,{children:t.description||"-"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(V.Title,{order:4,children:"Category"}),(0,s.jsx)(j.Badge,{color:ed[t.category],size:"sm",children:t.category||"-"})]})]}):(0,s.jsx)(P.Text,{children:"No resource selected."})};function eh(e){let{data:t}=e,[a,r]=(0,l.useState)(""),[m,x]=(0,l.useState)("All"),[j,g]=(0,l.useState)(!1),[f,y]=(0,l.useState)(!1),[b,T]=(0,l.useState)(!1),[w,A]=(0,l.useState)(null),[v,S]=(0,l.useState)(t),[C,E]=(0,l.useState)(!0),[I,N]=(0,l.useState)(null);(0,l.useEffect)(()=>{let e=localStorage.getItem("token");e&&N(e)},[]);let k=async()=>{try{E(!0);let e=await fetch("/api/resources",{method:"GET",headers:{"Content-Type":"application/json",Authorization:I?"Bearer ".concat(I):""}});e.ok||(q.Ay.error("Failed to fetch resources: ".concat(e.statusText)),S([]));let t=await e.json();S(Array.isArray(t)?t:t.resources||[])}catch(e){q.Ay.error(e instanceof Error?e.message:"Failed to load resources. Please try again later."),S([])}finally{E(!1)}};(0,l.useEffect)(()=>{I&&k()},[I]);let z=()=>{k()},P=async e=>{try{let t=await fetch("/api/resources/".concat(e),{method:"DELETE",headers:{Authorization:I?"Bearer ".concat(I):""}});if(!t.ok){let e=await t.json();q.Ay.error(e.message||"HTTP error! status: ".concat(t.status));return}await k()}catch(e){q.Ay.error(e instanceof Error?e.message:"Failed to delete resource. Please try again later.")}},F=v.filter(e=>{let t=e.title.toLowerCase().includes(a.toLowerCase())||e.description.toLowerCase().includes(a.toLowerCase())||e.category.toLowerCase().includes(a.toLowerCase()),s="All"===m||e.category.toLowerCase()===m.toLowerCase();return t&&s});return(0,s.jsxs)("div",{className:"max-w-full p-4 overflow-x-auto sm:p-6 md:p-8",children:[(0,s.jsxs)("div",{className:"flex flex-col gap-4 mb-6 sm:flex-row sm:justify-between sm:items-center",children:[(0,s.jsxs)(i.Group,{gap:"xs",wrap:"wrap",children:[(0,s.jsx)(n.Button,{leftSection:(0,s.jsx)(u.A,{size:16}),variant:"filled",color:"blue",onClick:()=>g(!0),size:"compact-md",className:"w-full sm:w-auto",children:"Add new"}),(0,s.jsx)(n.Button,{leftSection:(0,s.jsx)(h.A,{size:16}),variant:"outline",color:"blue",onClick:z,size:"compact-md",className:"w-full sm:w-auto",children:"Refresh"})]}),(0,s.jsxs)(i.Group,{gap:"xs",wrap:"wrap",children:[(0,s.jsx)(o.TextInput,{placeholder:"Search...",value:a,onChange:e=>r(e.currentTarget.value),rightSection:(0,s.jsx)(p.A,{size:16}),size:"sm"}),(0,s.jsx)(c.Select,{placeholder:"All",data:["All","Featured Insight","Our Latest Reports","Data & Ensights","Date Hub & Archive"],value:m,onChange:e=>x(e||"All"),size:"sm"})]})]}),(0,s.jsx)(er,{resources:F,loading:C,onView:e=>{A(e),T(!0)},onEdit:e=>{A(e),y(!0)},onDelete:P}),(0,s.jsx)(d.Modal,{opened:j,onClose:()=>g(!1),title:"Add New Resource",size:"xl",closeOnEscape:!1,closeOnClickOutside:!1,children:(0,s.jsx)(eo,{onClose:()=>{g(!1),z()}})}),(0,s.jsx)(d.Modal,{opened:f,onClose:()=>y(!1),title:"Edit Resource",size:"xl",closeOnEscape:!1,closeOnClickOutside:!1,children:w&&(0,s.jsx)(ec,{resource:w,onClose:()=>{y(!1),z()}})}),(0,s.jsx)(d.Modal,{opened:b,onClose:()=>T(!1),title:"View Resource",size:"xl",closeOnEscape:!1,closeOnClickOutside:!1,children:w&&(0,s.jsx)(eu,{selectedResource:w})})]})}let ep=[{header:"Title",accessor:"title"},{header:"Description",accessor:"description"},{header:"Name",accessor:"name"},{header:"Actions",accessor:"actions"}];function em(e){let{corporates:t,loading:a,onView:r,onEdit:i,onDelete:n,itemsPerPage:o=5}=e,[c,d]=(0,l.useState)(1),u=Math.ceil(t.length/o),h=t.slice((c-1)*o,c*o);return a?(0,s.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,s.jsx)(m.Loader,{})}):(0,s.jsxs)("div",{children:[(0,s.jsxs)(x.Table,{highlightOnHover:!0,verticalSpacing:"sm",className:"border border-gray-300",children:[(0,s.jsx)(x.Table.Thead,{className:"text-center text-gray-700 bg-gray-400",children:(0,s.jsx)(x.Table.Tr,{children:ep.map(e=>(0,s.jsx)(x.Table.Th,{children:e.header},e.accessor))})}),(0,s.jsx)(x.Table.Tbody,{children:h.map(e=>(0,s.jsxs)(x.Table.Tr,{className:"text-left",children:[(0,s.jsx)(x.Table.Td,{children:e.title}),(0,s.jsx)(x.Table.Td,{children:e.description||"-"}),(0,s.jsx)(x.Table.Td,{children:e.name}),(0,s.jsx)(x.Table.Td,{children:(0,s.jsxs)(g.Menu,{shadow:"md",width:200,position:"bottom-end",children:[(0,s.jsx)(g.Menu.Target,{children:(0,s.jsx)(f.ActionIcon,{color:"blue",title:"Actions",size:"sm",children:(0,s.jsx)(b.A,{size:14})})}),(0,s.jsxs)(g.Menu.Dropdown,{children:[(0,s.jsx)(g.Menu.Item,{leftSection:(0,s.jsx)(T.A,{size:14}),onClick:()=>r(e),children:"View"}),(0,s.jsx)(g.Menu.Item,{leftSection:(0,s.jsx)(w.A,{size:14}),onClick:()=>i(e),children:"Edit"}),(0,s.jsx)(g.Menu.Item,{leftSection:(0,s.jsx)(v.A,{size:14}),onClick:()=>n(null==e?void 0:e.id),color:"red",children:"Delete"})]})]})})]},e.id))})]}),u>1&&(0,s.jsxs)("div",{className:"flex justify-end mt-4",children:[(0,s.jsxs)("span",{className:"mt-2 mr-2 text-xs text-gray-300",children:["Total Entries: (",t.length,")"]}),(0,s.jsx)(y.Pagination,{total:u,value:c,onChange:d,size:"sm",radius:"md",withEdges:!0})]})]})}function ex(e){let{initialValues:t,onSubmit:a,loading:l,isEditMode:r}=e,c=(0,N.m)({initialValues:t,validate:{title:e=>e.length<3?"Title must be at least 3 characters":null,description:e=>e.length<10?"Description must be at least 10 characters":null,content:e=>e.length<10?"Content must be at least 10 characters":null,image:e=>r||e?null:"Image is required for new entries",profileImage:e=>r||e?null:"Profile image is required for new entries",name:e=>e.length<2?"Name must be at least 2 characters":null,role:e=>e.length<2?"Role must be at least 2 characters":null,born:e=>e.length<2?"Born must be at least 2 characters":null,education:e=>e.length<5?"Education must be at least 5 characters":null,mission:e=>e.length<10?"Mission must be at least 10 characters":null,specialties:e=>e.length<5?"Specialties must be at least 5 characters":null,certifications:e=>e.length<5?"Certifications must be at least 5 characters":null,motto:e=>e.length<5?"Motto must be at least 5 characters":null,founded:e=>e.length<2?"Founded must be at least 2 characters":null}});return l?(0,s.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,s.jsx)(m.Loader,{})}):(0,s.jsxs)("form",{onSubmit:c.onSubmit(a),className:"p-4",children:[(0,s.jsx)(o.TextInput,{label:"Title",placeholder:"Enter title",...c.getInputProps("title"),mb:"md"}),(0,s.jsx)(D.Textarea,{label:"Description",placeholder:"Enter description",minRows:4,...c.getInputProps("description"),mb:"md"}),(0,s.jsx)(D.Textarea,{label:"Content",placeholder:"Enter content",minRows:6,...c.getInputProps("content"),mb:"md"}),(0,s.jsxs)(i.Group,{justify:"space-between",align:"flex-start",wrap:"nowrap",mb:"md",children:[r&&c.values.image&&"string"==typeof c.values.image&&(0,s.jsxs)(z.Stack,{align:"center",gap:"xs",style:{flexShrink:0},children:[(0,s.jsx)(M.default,{src:c.values.image,alt:c.values.title||"Uploaded image",width:100,height:100,style:{objectFit:"cover"}}),(0,s.jsx)(P.Text,{size:"sm",color:"dimmed",children:"Current Image"})]}),(0,s.jsx)(F.FileInput,{label:"Select an Image",placeholder:"Upload image",accept:"image/*",...c.getInputProps("image"),style:{flex:1,maxWidth:"".concat(r?"calc(100% - 120px)":"100%")}})]}),(0,s.jsxs)(i.Group,{justify:"space-between",align:"flex-start",wrap:"nowrap",mb:"md",children:[r&&c.values.profileImage&&"string"==typeof c.values.profileImage&&(0,s.jsxs)(z.Stack,{align:"center",gap:"xs",style:{flexShrink:0},children:[(0,s.jsx)(M.default,{src:c.values.profileImage,alt:c.values.name||"Uploaded profile image",width:100,height:100,style:{objectFit:"cover"}}),(0,s.jsx)(P.Text,{size:"sm",color:"dimmed",children:"Current Profile Image"})]}),(0,s.jsx)(F.FileInput,{label:"Select a Profile Image",placeholder:"Upload profile image",accept:"image/*",...c.getInputProps("profileImage"),style:{flex:1,maxWidth:"".concat(r?"calc(100% - 120px)":"100%")}})]}),(0,s.jsx)(o.TextInput,{label:"Quote (Optional)",placeholder:"Enter quote",...c.getInputProps("quote"),mb:"md"}),(0,s.jsx)(o.TextInput,{label:"Name",placeholder:"Enter name",...c.getInputProps("name"),mb:"md"}),(0,s.jsx)(o.TextInput,{label:"Role",placeholder:"Enter role",...c.getInputProps("role"),mb:"md"}),(0,s.jsx)(o.TextInput,{label:"Born",placeholder:"Enter birth details",...c.getInputProps("born"),mb:"md"}),(0,s.jsx)(o.TextInput,{label:"Education",placeholder:"Enter education details",...c.getInputProps("education"),mb:"md"}),(0,s.jsx)(D.Textarea,{label:"Mission",placeholder:"Enter mission statement",minRows:4,...c.getInputProps("mission"),mb:"md"}),(0,s.jsx)(o.TextInput,{label:"Specialties",placeholder:"Enter specialties",...c.getInputProps("specialties"),mb:"md"}),(0,s.jsx)(o.TextInput,{label:"Certifications",placeholder:"Enter certifications",...c.getInputProps("certifications"),mb:"md"}),(0,s.jsx)(o.TextInput,{label:"Motto",placeholder:"Enter motto",...c.getInputProps("motto"),mb:"md"}),(0,s.jsx)(o.TextInput,{label:"Founded",placeholder:"Enter founding details",...c.getInputProps("founded"),mb:"md"}),(0,s.jsx)(i.Group,{justify:"flex-end",mt:"lg",children:(0,s.jsx)(n.Button,{type:"submit",disabled:l||!c.isDirty(),color:"blue",children:r?"Update Corporate":"Create Corporate"})})]})}function ej(e){let{onClose:t}=e,[a,r]=(0,l.useState)(null),[i,n]=(0,l.useState)(!1);(0,l.useEffect)(()=>{let e=localStorage.getItem("token");e&&r(e)},[]);let o={id:(0,I.A)(),title:"",description:"",content:"",image:"",profileImage:"",quote:"",name:"",role:"",born:"",education:"",mission:"",specialties:"",certifications:"",motto:"",founded:""},c=async e=>{if(!a)return void q.Ay.error("Authentication token missing");n(!0);try{let s=new FormData;s.append("title",e.title),e.description&&s.append("description",e.description),e.content&&s.append("content",e.content),e.quote&&s.append("quote",e.quote),e.name&&s.append("name",e.name),e.role&&s.append("role",e.role),e.born&&s.append("born",e.born),e.education&&s.append("education",e.education),e.mission&&s.append("mission",e.mission),e.specialties&&s.append("specialties",e.specialties),e.certifications&&s.append("certifications",e.certifications),e.motto&&s.append("motto",e.motto),e.founded&&s.append("founded",e.founded),e.image instanceof File&&s.append("image",e.image),e.profileImage instanceof File&&s.append("profile_image",e.profileImage);let l=await fetch("/api/corporate",{method:"POST",headers:{Authorization:"Bearer ".concat(a)},body:s});if(!l.ok){let e=await l.json();q.Ay.error(e.message||"Failed to create corporate entry");return}q.Ay.success("Corporate entry created successfully"),t()}catch(e){q.Ay.error(e.message||"Failed to create corporate entry")}finally{n(!1)}};return(0,s.jsx)(ex,{initialValues:o,onSubmit:c,loading:i,isEditMode:!1})}function eg(e){let{corporate:t,onClose:a}=e,[r,i]=(0,l.useState)(null),[n,o]=(0,l.useState)(null),[c,d]=(0,l.useState)(!1);(0,l.useEffect)(()=>{let e=localStorage.getItem("token");e&&i(e)},[]),(0,l.useEffect)(()=>{(async()=>{if((null==t?void 0:t.id)&&r){d(!0);try{let e=await fetch("/api/corporate/".concat(t.id),{method:"GET",headers:{Authorization:"Bearer ".concat(r)}});if(!e.ok){q.Ay.error("Failed to fetch corporate entry"),d(!1);return}let a=await e.json();o(a)}catch(e){q.Ay.error(e.message||"Failed to fetch corporate entry")}finally{d(!1)}}})()},[null==t?void 0:t.id,r]);let u=async e=>{if(!r)return void q.Ay.error("Authentication token missing");d(!0);try{let t=new FormData;e.title&&t.append("title",e.title),e.description&&t.append("description",e.description),e.content&&t.append("content",e.content),e.quote&&t.append("quote",e.quote),e.name&&t.append("name",e.name),e.role&&t.append("role",e.role),e.born&&t.append("born",e.born),e.education&&t.append("education",e.education),e.mission&&t.append("mission",e.mission),e.specialties&&t.append("specialties",e.specialties),e.certifications&&t.append("certifications",e.certifications),e.motto&&t.append("motto",e.motto),e.founded&&t.append("founded",e.founded),e.image instanceof File&&t.append("image",e.image),e.profileImage instanceof File&&t.append("profile_image",e.profileImage);let s=await fetch("/api/corporate/".concat(e.id),{method:"PATCH",headers:{Authorization:"Bearer ".concat(r)},body:t});if(!s.ok){let e=await s.json();q.Ay.error(e.message||"Failed to update corporate entry");return}q.Ay.success("Corporate entry updated successfully"),a()}catch(e){q.Ay.error(e.message||"Failed to update corporate entry")}finally{d(!1)}};return c?(0,s.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,s.jsx)(m.Loader,{})}):n?(0,s.jsx)(ex,{initialValues:n,onSubmit:u,loading:c,isEditMode:!0}):(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center py-8 space-y-4",children:[(0,s.jsx)("p",{children:"Corporate entry not found"}),(0,s.jsx)("button",{onClick:a,className:"px-4 py-2 text-white bg-red-500 rounded-md cursor-pointer",children:"Close"})]})}let ef=e=>{let{selectedCorporate:t}=e;return t?(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(V.Title,{order:4,children:"Title"}),(0,s.jsx)(P.Text,{children:t.title||"-"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(V.Title,{order:4,children:"Description"}),(0,s.jsx)(P.Text,{children:t.description||"-"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(V.Title,{order:4,children:"Content"}),(0,s.jsx)(P.Text,{children:t.content||"-"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(V.Title,{order:4,children:"Image"}),t.image?(0,s.jsx)(G.Image,{src:t.image,alt:t.title||"Corporate image",radius:"md",height:200,fit:"contain",className:"w-full max-w-md"}):(0,s.jsx)(P.Text,{children:"-"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(V.Title,{order:4,children:"Profile Image"}),t.profileImage?(0,s.jsx)(G.Image,{src:t.profileImage,alt:t.name||"Profile image",radius:"md",height:200,fit:"contain",className:"w-full max-w-md"}):(0,s.jsx)(P.Text,{children:"-"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(V.Title,{order:4,children:"Quote"}),(0,s.jsx)(P.Text,{children:t.quote||"-"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(V.Title,{order:4,children:"Name"}),(0,s.jsx)(P.Text,{children:t.name||"-"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(V.Title,{order:4,children:"Role"}),(0,s.jsx)(P.Text,{children:t.role||"-"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(V.Title,{order:4,children:"Born"}),(0,s.jsx)(P.Text,{children:t.born||"-"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(V.Title,{order:4,children:"Education"}),(0,s.jsx)(P.Text,{children:t.education||"-"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(V.Title,{order:4,children:"Mission"}),(0,s.jsx)(P.Text,{children:t.mission||"-"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(V.Title,{order:4,children:"Specialties"}),(0,s.jsx)(P.Text,{children:t.specialties||"-"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(V.Title,{order:4,children:"Certifications"}),(0,s.jsx)(P.Text,{children:t.certifications||"-"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(V.Title,{order:4,children:"Motto"}),(0,s.jsx)(P.Text,{children:t.motto||"-"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(V.Title,{order:4,children:"Founded"}),(0,s.jsx)(P.Text,{children:t.founded||"-"})]})]}):(0,s.jsx)(P.Text,{children:"No corporate entry selected."})};function ey(e){let{data:t}=e,[a,r]=(0,l.useState)(""),[c,m]=(0,l.useState)(!1),[x,j]=(0,l.useState)(!1),[g,f]=(0,l.useState)(!1),[y,b]=(0,l.useState)(null),[T,w]=(0,l.useState)(t),[A,v]=(0,l.useState)(!0),[S,C]=(0,l.useState)(null);(0,l.useEffect)(()=>{let e=localStorage.getItem("token");e&&C(e)},[]);let E=async()=>{try{v(!0);let e=await fetch("/api/corporate",{method:"GET",headers:{"Content-Type":"application/json",Authorization:S?"Bearer ".concat(S):""}});e.ok||(q.Ay.error("Failed to fetch corporate entries: ".concat(e.statusText)),w([]));let t=await e.json();w(Array.isArray(t)?t:(null==t?void 0:t.corporates)||(null==t?void 0:t.data)||[])}catch(e){q.Ay.error(e instanceof Error?e.message:"Failed to load corporate entries. Please try again later."),w([])}finally{v(!1)}};(0,l.useEffect)(()=>{S&&E()},[S]);let I=()=>{E()},N=async e=>{try{let t=await fetch("/api/corporate/".concat(e),{method:"DELETE",headers:{Authorization:S?"Bearer ".concat(S):""}});if(!t.ok){let e=await t.json();q.Ay.error(e.message||"Failed to delete corporate entry: ".concat(t.statusText));return}await E()}catch(e){q.Ay.error(e instanceof Error?e.message:"Failed to delete corporate entry. Please try again later.")}},k=T.filter(e=>e.title.toLowerCase().includes(a.toLowerCase())||e.description.toLowerCase().includes(a.toLowerCase())||e.name.toLowerCase().includes(a.toLowerCase())||e.role.toLowerCase().includes(a.toLowerCase()));return(0,s.jsxs)("div",{className:"max-w-full p-4 overflow-x-auto sm:p-6 md:p-8",children:[(0,s.jsxs)("div",{className:"flex flex-col gap-4 mb-6 sm:flex-row sm:justify-between sm:items-center",children:[(0,s.jsxs)(i.Group,{gap:"xs",wrap:"wrap",children:[(0,s.jsx)(n.Button,{leftSection:(0,s.jsx)(u.A,{size:16}),variant:"filled",color:"blue",onClick:()=>m(!0),size:"compact-md",className:"w-full sm:w-auto",children:"Add new"}),(0,s.jsx)(n.Button,{leftSection:(0,s.jsx)(h.A,{size:16}),variant:"outline",color:"blue",onClick:I,size:"compact-md",className:"w-full sm:w-auto",children:"Refresh"})]}),(0,s.jsx)(i.Group,{gap:"xs",wrap:"wrap",children:(0,s.jsx)(o.TextInput,{placeholder:"Search...",value:a,onChange:e=>r(e.currentTarget.value),rightSection:(0,s.jsx)(p.A,{size:16}),size:"sm"})})]}),(0,s.jsx)(em,{corporates:k,loading:A,onView:e=>{b(e),f(!0)},onEdit:e=>{b(e),j(!0)},onDelete:N}),(0,s.jsx)(d.Modal,{opened:c,onClose:()=>m(!1),title:"Add New Corporate",size:"xl",closeOnEscape:!1,closeOnClickOutside:!1,children:(0,s.jsx)(ej,{onClose:()=>{m(!1),I()}})}),(0,s.jsx)(d.Modal,{opened:x,onClose:()=>j(!1),title:"Edit Corporate",size:"xl",closeOnEscape:!1,closeOnClickOutside:!1,children:y&&(0,s.jsx)(eg,{corporate:y,onClose:()=>{j(!1),I()}})}),(0,s.jsx)(d.Modal,{opened:g,onClose:()=>f(!1),title:"View Corporate",size:"xl",closeOnEscape:!1,closeOnClickOutside:!1,children:y&&(0,s.jsx)(ef,{selectedCorporate:y})})]})}function eb(){let[e,t]=(0,l.useState)([]),[a,i]=(0,l.useState)(!0),[n,o]=(0,l.useState)(null);return(0,l.useEffect)(()=>{!async function(){try{let e=await fetch("/api/article",{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token")||"")}});if(!e.ok){let t=await e.json();throw Error(t.message||"Failed to fetch articles")}let a=await e.json();t(a)}catch(e){console.error("Error fetching articles:",e),o(e.message||"Something went wrong")}finally{i(!1)}}()},[]),(0,s.jsx)("div",{children:(0,s.jsxs)(r.Tabs,{defaultValue:"Articles",className:"pt-5",children:[(0,s.jsxs)(r.Tabs.List,{children:[(0,s.jsx)(r.Tabs.Tab,{value:"User",children:"User"}),(0,s.jsx)(r.Tabs.Tab,{value:"Articles",children:"Articles"}),(0,s.jsx)(r.Tabs.Tab,{value:"Resources",children:"Resources"}),(0,s.jsx)(r.Tabs.Tab,{value:"Corporate",children:"Corporate"})]}),(0,s.jsx)(r.Tabs.Panel,{value:"Articles",pt:"xs",children:a?(0,s.jsx)("p",{children:"Loading articles..."}):n?(0,s.jsx)("p",{children:n}):(0,s.jsx)(J,{data:e})}),(0,s.jsx)(r.Tabs.Panel,{value:"User",pt:"xs",children:(0,s.jsx)(ea,{data:[]})}),(0,s.jsx)(r.Tabs.Panel,{value:"Resources",pt:"xs",children:(0,s.jsx)(eh,{data:[]})}),(0,s.jsx)(r.Tabs.Panel,{value:"Corporate",pt:"xs",children:(0,s.jsx)(ey,{data:[]})})]})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[2545,3347,6766,4481,702,6890,3433,8441,1684,7358],()=>t(91470)),_N_E=e.O()}]);